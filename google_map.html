<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>
    <title>Google map API</title>
    <style>
        #map{
            width: 100%;
            height: 300px;
        }
    </style>
</head>
<body>
    <h1>臺北市政府地圖</h1>
    <div id="map"></div>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBy5_SjUbRXayyiYVb9QaQSlRUW6CSM5Io&callback=initMap"></script>
    <script>
// Initialize and add the map
function initMap() {
                // The location of Uluru
                const cityhall = { lat:25.051491931654756, lng: 121.56509707547268 };
                // The map, centered at Uluru
                const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 15,
                    center: cityhall,
                });
                // The marker, positioned at Uluru
                // const marker = new google.maps.Marker({
                //     position: cityhall,
                //     map: map,
                //     title: "台北市政府"
                // });

                // Create an array of alphabetical characters used to label the markers.
                const labels = ["一蘭拉麵", "蘇阿姨比薩屋", "Wooloomooloo", "Maple Tree", "BRUN"];
                const markers = locations.map((position, i) => {
                const label = labels[i % labels.length];
                const marker = new google.maps.Marker({
                      position,
                      label,
                      icon: "./img/pla.png"
                });
                marker.addListener("click", () => {
                infoWindow.setContent(label);
                infoWindow.open(map, marker);
                });
                return marker;
                });

                const markerCluster = new markerClusterer.MarkerClusterer({ map, markers });

               
                
                // const info_string = `
                //     <h3>台北市政府</h3>
                //     <img style="width: 50%, margin: 0 auto" 
                //         src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Taipei_Skyline_20220708.jpg/288px-Taipei_Skyline_20220708.jpg">
                //     <p style="color:red">中華民國臺北市的地方行政機關</p>
                //     `;
                // const infowindow = new google.maps.InfoWindow({
                //     content: info_string,
                //     ariaLabel: "Uluru",
                //     });

                // marker.addListener("click", () => {
                //     infowindow.open({
                //     anchor: marker,
                //     map,
                //     });
                // });
            }

            const locations = [
                    { lat: 25.03687044712661, lng: 121.5692930758981 },
                    { lat: 25.03940471569679, lng: 121.5574353301334 },
                    { lat: 25.03360177693387, lng: 121.55810137644467 },
                    { lat: 25.030707797248287, lng: 121.5575862167569 },
                    { lat: 25.04013631858028,  lng: 121.54961154577279 }
                ];

            window.initMap = initMap;

    </script>

</body>
</html>